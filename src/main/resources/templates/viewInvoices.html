<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Management - Cornucopia</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        /* Consolidated Dashboard CSS */
        /* ... [Include all CSS from your dashboard paste.txt here] ... */

        /* Invoice Specific Additions */
		body {
		            font-family: 'Poppins', sans-serif;
		            background-color: #f5f5f5;
		            color: #333;
		            margin: 0;
		            overflow-x: hidden;
		        }
		        .sidebar {
		            background:  #2e7d32 ;
		            transition: transform 0.3s ease-in-out;
		            z-index: 20;
		            position: fixed;
		            top: 0;
		            left: 0;
		            height: 100vh;
		            width: 256px;
		            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
		            display: flex;
		            flex-direction: column;
		            justify-content: space-between;
		        }
		        .sidebar-header {
		            display: flex;
		            align-items: center;
		            margin-bottom: 2.5rem;
		            margin-top: 0.5rem;
		        }
		        .cornucopia-logo {
		            width: 38px;
		            height: 38px;
		            margin-right: 0.7rem;
		        }
		        .app-title {
		            font-size: 1.8rem;
					margin-top: 20px;
		            font-weight: 700;
		            color: #fff;
		            letter-spacing: 1px;
		        }
		        .nav-section {
		            flex: 1;
		        }
		        .nav-link {
		            display: flex;
		            align-items: center;
		            padding: 0.7rem 1rem;
		            border-radius: 0.5rem;
		            color: #e6ffe6;
		            text-decoration: none;
		            font-size: 1.07rem;
		            margin-bottom: 0.2rem;
		            transition: background 0.15s, color 0.15s;
		        }
		        .nav-link:hover {
		            background: #1b5e20;
		            color: #fff;
		        }
		        .nav-link .nav-icon {
		            margin-right: 0.8rem;
		            font-size: 1.5rem;
		        }
		        .nav-link.active {
		            background: #124d2b;
		            color: #fff;
		            font-weight: 700;
		        }
		        .divider {
		            border-top: 1px solid #ffffff55;
		            margin: 1.5rem 0 1rem 0;
		        }
		        .logout-link {
		            display: flex;
		            align-items: center;
		            padding: 0.7rem 1rem;
		            border-radius: 0.5rem;
		            color: #fff;
		            text-decoration: none;
		            font-size: 1.07rem;
		            margin-bottom: 0.2rem;
		            background: #17643a;
		            transition: background 0.15s, color 0.15s;
		        }
		        .logout-link:hover {
		            background: #ba1b1b;
		            color: #fff;
		        }
		        .logout-link .nav-icon {
		            margin-right: 0.8rem;
		            font-size: 1.5rem;
		        }
		        .header {
		            display: flex;
		            justify-content: space-between;
		            align-items: center;
		            padding: 1.3rem 2.5rem;
		            background-color: #ffffff;
		            margin-left: 256px;
		            position: fixed;
		            top: 0;
		            left: 0;
		            width: calc(100% - 256px);
		            z-index: 15;
		            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
		        }
		        .header-title {
		            font-size: 1.6rem;
		            font-weight: 700;
		            color: #17643a;
		            letter-spacing: 1px;
		        }
		        .user-info {
		            display: flex;
		            align-items: center;
		            gap: 0.7rem;
		        }
		        .user-avatar {
		            background-color: #17643a;
		            color: #fff;
		            border-radius: 50%;
		            width: 2.2rem;
		            height: 2.2rem;
		            display: flex;
		            align-items: center;
		            justify-content: center;
		            font-size: 1rem;
		            font-weight: 600;
		        }
		        .main-content {
		            background: #f5f5f5;
		            min-height: 100vh;
		            margin-left: 256px;
		            position: relative;
		            z-index: 10;
		            padding: 0 2.5rem 2.5rem 2.5rem;
		            padding-top: 6.5rem;
		        }
		        .welcome-header {
		            font-size: 2.2rem;
		            font-weight: 700;
		            color: #17643a;
		            margin-bottom: 0.2rem;
		            text-align: center;
		        }
		        .welcome-sub {
		            color: #4caf50;
		            font-size: 1.13rem;
		            text-align: center;
		            margin-bottom: 2.5rem;
		        }
		        .stats-grid {
		            display: grid;
		            grid-template-columns: repeat(4, 1fr);
		            gap: 2rem;
		            margin-bottom: 2.5rem;
		        }
		        .stat-card {
		            background-color: #fff;
		            border-radius: 1rem;
		            padding: 2rem 1.3rem;
		            display: flex;
		            align-items: center;
		            gap: 1.2rem;
		            box-shadow: 0 6px 24px rgba(34, 197, 94, 0.08);
		            transition: box-shadow 0.2s, transform 0.2s;
		        }
		        .stat-card:hover {
		            box-shadow: 0 12px 32px rgba(34, 197, 94, 0.16);
		            transform: translateY(-4px) scale(1.025);
		        }
		        .stat-icon {
		            background: #e6f4ea;
		            color: #17643a;
		            border-radius: 0.7rem;
		            width: 3.2rem;
		            height: 3.2rem;
		            display: flex;
		            align-items: center;
		            justify-content: center;
		            font-size: 1.7rem;
		        }
		        .stat-info {
		            flex: 1;
		        }
		        .stat-label {
		            color: #5a7e6b;
		            font-size: 1rem;
		            margin-bottom: 0.3rem;
		        }
		        .stat-value {
		            font-size: 1.5rem;
		            font-weight: 700;
		            color: #17643a;
		        }
		        .stat-trend {
		            font-size: 0.95rem;
		            font-weight: 600;
		            margin-left: 0.8rem;
		            color: #388e3c;
		            background: #e8f5e9;
		            border-radius: 0.7rem;
		            padding: 0.15rem 0.7rem;
		        }
		        .actions-grid {
		            display: grid;
		            grid-template-columns: repeat(4, 1fr);
		            gap: 2rem;
		        }
		        .action-card {
		            background-color: #fff;
		            border-radius: 1rem;
		            box-shadow: 0 4px 16px rgba(34, 197, 94, 0.08);
		            padding: 2.2rem 1.5rem 2rem 1.5rem;
		            display: flex;
		            flex-direction: column;
		            align-items: flex-start;
		            transition: box-shadow 0.2s, transform 0.2s;
		            min-height: 260px;
		        }
		        .action-card:hover {
		            box-shadow: 0 8px 32px rgba(34, 197, 94, 0.18);
		            transform: translateY(-5px) scale(1.025);
		        }
		        .action-icon {
		            background: #e6f4ea;
		            color: #17643a;
		            border-radius: 0.7rem;
		            width: 2.8rem;
		            height: 2.8rem;
		            display: flex;
		            align-items: center;
		            justify-content: center;
		            font-size: 1.5rem;
		            margin-bottom: 1.2rem;
		        }
		        .action-title {
		            font-size: 1.15rem;
		            font-weight: 700;
		            color: #17643a;
		            margin-bottom: 0.5rem;
		        }
		        .action-desc {
		            color: #4caf50;
		            font-size: 1rem;
		            margin-bottom: 1.3rem;
		        }
		        .action-btn {
		            margin-top: auto;
		            padding: 0.7rem 1.2rem;
		            background: #17643a;
		            color: #fff;
		            font-size: 1rem;
		            font-weight: 600;
		            border: none;
		            border-radius: 0.6rem;
		            cursor: pointer;
		            transition: background 0.18s;
		            width: 100%;
		        }
		        .action-btn:hover {
		            background: #124d2b;
		        }
		        @media (max-width: 1400px) {
		            .stats-grid, .actions-grid {
		                grid-template-columns: repeat(2, 1fr);
		            }
		        }
		        @media (max-width: 900px) {
		            .sidebar {
		                width: 180px;
		            }
		            .header, .main-content {
		                margin-left: 180px;
		                width: calc(100% - 180px);
		            }
		            .stats-grid, .actions-grid {
		                grid-template-columns: 1fr;
		            }
		        }
		        @media (max-width: 600px) {
		            .sidebar {
		                display: none;
		            }
		            .header, .main-content {
		                margin-left: 0;
		                width: 100%;
		            }
		        }
        .filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .filter-btn {
            padding: 0.7rem 1.5rem;
            border-radius: 2rem;
            background: #e6f4ea;
            color: #17643a;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: #17643a;
            color: white;
        }

        .invoice-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
        }

        .invoice-card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 6px 24px rgba(34, 197, 94, 0.08);
            transition: all 0.2s;
            border-left: 4px solid #17643a;
        }

        .invoice-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 32px rgba(34, 197, 94, 0.16);
        }

        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .invoice-id {
            font-weight: 700;
            color: #17643a;
        }

        .invoice-type {
            background: #e6f4ea;
            color: #17643a;
            padding: 0.3rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.9rem;
        }

        .invoice-table {
            width: 100%;
            margin: 1rem 0;
        }

        .invoice-table th {
            background: #f8faf9;
            color: #5a7e6b;
            font-weight: 600;
            padding: 0.8rem;
            text-align: left;
        }

        .invoice-table td {
            padding: 0.8rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .total-price {
            text-align: right;
            font-weight: 700;
            color: #17643a;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
	<!-- Sidebar Navigation -->
	<div class="sidebar">
	    <div>
	        <div class="sidebar-header">
	            <!-- Cornucopia SVG Logo -->
	            <svg class="cornucopia-logo" viewBox="0 0 48 48" fill="none">
	                <ellipse cx="32" cy="32" rx="13" ry="10" fill="#f7b267"/>
	                <ellipse cx="32" cy="32" rx="10" ry="7" fill="#fffbe6"/>
	                <path d="M12 36 Q20 20, 36 16 Q44 18, 44 32 Q44 44, 32 44 Q18 44, 12 36 Z" fill="#f7b267" stroke="#17643a" stroke-width="2"/>
	                <ellipse cx="18" cy="30" rx="3" ry="2" fill="#4caf50"/>
	                <ellipse cx="26" cy="36" rx="2" ry="1.3" fill="#f44336"/>
	                <ellipse cx="38" cy="36" rx="2.3" ry="1.5" fill="#ffeb3b"/>
	                <ellipse cx="30" cy="28" rx="2" ry="1.5" fill="#81c784"/>
	            </svg>
	            <span class="app-title">Cornucopia</span>
	        </div>
	        <div class="nav-section">
	            <a href="/admin/adminHome" class="nav-link active">
	                <span class="nav-icon">📊</span>
	                Dashboard
	            </a>
	            <a href="/admin/statistics" class="nav-link">
	                <span class="nav-icon">📈</span>
	                Statistics
	            </a>
	            <a href="/admin/purchase" class="nav-link">
	                <span class="nav-icon">🛒</span>
	                Make Purchase
	            </a>
	            <a href="/admin/products" class="nav-link">
	                <span class="nav-icon">📦</span>
	                All Products
	            </a>
	            <a href="/admin/invoices" class="nav-link">
	                <span class="nav-icon">📜</span>
	                Invoices
	            </a>
	            <a href="/admin/vendor" class="nav-link">
	                <span class="nav-icon">👥</span>
	                Vendors
	            </a>
	        </div>
	        <div class="divider"></div>
	    </div>
	    <div>
	        <a href="/logout" class="logout-link">
	            <span class="nav-icon">🚪</span>
	            Logout
	        </a>
	    </div>
	</div>

    <!-- Header -->
    <div class="header">
        <div class="header-title">Invoice Management</div>
        <div class="user-info">
            <span>Admin User</span>
            <div class="user-avatar">AU</div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <h1 class="welcome-header">Invoice Overview</h1>
        <div class="welcome-sub">Manage all sales and purchase invoices</div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <a th:href="@{/admin/invoices}" 
               class="filter-btn" 
               th:classappend="${activeFilter == 'all'} ? 'active' : ''">
               All Invoices
            </a>
            <a th:href="@{/admin/invoices/sales}" 
               class="filter-btn" 
               th:classappend="${activeFilter == 'SALES'} ? 'active' : ''">
               Sales
            </a>
            <a th:href="@{/admin/invoices/purchase}" 
               class="filter-btn" 
               th:classappend="${activeFilter == 'PURCHASE'} ? 'active' : ''">
               Purchases
            </a>
        </div>

        <!-- Invoice Cards -->
        <div class="invoice-grid">
            <div th:each="invoiceMap : ${invoiceData}" class="invoice-card">
                <div class="invoice-header">
                    <span class="invoice-id" th:text="'INV-' + ${invoiceMap.invoice.id}"></span>
                    <span class="invoice-type" th:text="${invoiceMap.invoice.type}"></span>
                </div>
                
                <p><strong th:text="${invoiceMap.invoice.type == 'PURCHASE' ? 'Vendor:' : 'Customer:'}"></strong>
                   <span th:text="${invoiceMap.entityName}"></span></p>
                <p><strong>Date:</strong> <span th:text="${invoiceMap.formattedDate}"></span></p>

                <table class="invoice-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Qty</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${invoiceMap.invoice.items}">
                            <td th:text="${item.product.name}"></td>
                            <td th:text="'₹' + ${item.unitPrice}"></td>
                            <td th:text="${item.quantity}"></td>
                            <td th:text="'₹' + ${item.unitPrice * item.quantity}"></td>
                        </tr>
                    </tbody>
                </table>

                <div class="total-price">
                    Total: <span th:text="'₹' + ${invoiceMap.invoice.price}"></span>
                </div>
            </div>

            <div th:if="${invoiceData.size() == 0}" class="no-invoices">
                <p>No invoices found.</p>
            </div>
        </div>
    </div>
</body>
</html>
